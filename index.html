<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
		<link rel="stylesheet" href="./style.css" />
		<title>Citiflix</title>
	</head>
	<body>
		<div id="app" class="app">
            <header>
                <a href="/index.html"><h1><span>Citi</span>Flix</h1></a>
            </header>
            <section>
                <div id="sectionRecherche">
                    <form class="barreRecherche">
                        <input type="text" placeholder="Rechercher un film" v-model="recherche" />
                    </form>
                   <!-- <div class="checkboxes">
                        <form class="genres">
                            <span class="checkbox">
                                <label for="drama">Drame</label>
                                <input type="checkbox" id="drama">
                            </span>
                            <span class="checkbox">
                                <label for="drama">Drame</label>
                                <input type="checkbox" id="drama">
                            </span>
                            <span class="checkbox">
                                <label for="drama">Drame</label>
                                <input type="checkbox" id="drama">
                            </span>
                        </form>
                    </div> -->
                   
                </div>
                <div class="movieList">
                        <div class="movie" v-for="movie in movies" v-if="(movie != null)&&(movie.title.startsWith(recherche))" :key="movie.id" >
                            <div class="posterImage">
                                <img v-if="movie.poster_path != null" :src="lienPoster(movie.poster_path)" :alt="movie.title">
                            </div>
                            <div class="detail">
                                <h3> {{ movie.title }} </h3>
                                <p class="description"> {{ movie.overview }} </p>

                            </div>

                        </div>
                        

                </div>
            </section>
            <footer>
                {{ copyright }}
            </footer>
                    
		</div>

		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script>
			const app = new Vue({
				el: "#app",
				data: {
					recherche: '',
                    film: null,
                    movie: null,
                    movies: [],
                    lienGeneriquePoster : "http://image.tmdb.org/t/p/original",
					
				},

                mounted (){

                            for (compteur=1 ; compteur<10 ; compteur++){
                                axios.get("https://api.themoviedb.org/3/movie/popular?api_key=745b3605a8c8bb41a5be062e7928a979&page="+compteur)
                            .then(result => {
                                console.log(result)
                                this.movies = this.movies.concat(result.data.results)
                                console.log(this.movies)
                            })
                            .catch(error => console.log(error));
                            }
                            
                            
                            
                    
                    
                },
				computed: {
					copyright() {
						const currentYear = new Date().getFullYear()

						return `Copyright Pierre-Louis-Dev ${currentYear} Â©`
					}
                    
				},
				methods: {
                    lienPoster(path){
                          return this.lienGeneriquePoster + path
                    }
				}
			})
            
		</script>
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	</body>
</html>
